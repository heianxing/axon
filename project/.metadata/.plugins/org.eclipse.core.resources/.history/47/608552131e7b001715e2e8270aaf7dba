package com.sundy.axon.auditing.domain;

import java.io.Serializable;
import java.util.Map;

/**
 * 一条消息，包含载体和元数据，一帮用于表示命令或事件
 * 作为接口，一帮用他的子接口  如{@link CommandMessage}和{@link EventMessage}来替换 
 * @author Administrator
 *
 * @param <T>
 */

public interface Message<T> extends Serializable {

	/**
	 * 返回消息的唯一标识符，如果两条消息有一个相同的标识符，可以认为这两条消息只是一条消息的不同表现形式，
	 * 在这种情况下，元数据可以不同，但载体可能是相同的
	 * @return 消息的唯一标识符
	 */
	String getIdentifier();
	
	/**
	 * 返回事件的元数据，该元数据时key-value结构，当key是string类型，那么value应该是一个可以被序列化的对象
	 * @return
	 */
	MetaData getMetaData();
	
	T getPayload();
	
	Class<T> getPayloadType();
	
	Message<T> withMetaData(Map<String, ?> metaData);
	
	Message<T> andMetaData(Map<String, ?> metaData);
}
